王兴说过，我们已经进入到互联网的下半场。在上半场，也就是早期的互联网时代，你永远不知道在对面坐的是什么样的人。那个年代大部分人还是QQ的早期用户。在下半场，互联网公司已经不新鲜了，大部分公司已经互联网化。他们已经在用网络进行产品宣传，使用电商销售自己的商品。

这两年引领下半场发展的是那些在讲 “大数据”“赋能”的企业，他们有数据，有用户。

通过大数据告诉政府该如何智慧地管理交通，做城市规划。

通过消费数据分析，告诉企业该在什么时间生产什么产品，以最大化地满足用户的需求。

通过生活大数据告诉我们餐饮企业，甚至房地产企业该如何选址。

如果说互联网的上半场是粗狂运营，因为有流量红利不需要考虑细节。那么在下半场，**精细化运营将是长久的主题**。有数据，有数据分析能力才能让用户得到更好的体验。

所以，用户是根本，也是数据分析的出发点。

假如你进入到一家卖羊肉串的餐饮公司，老板说现在竞争越来越激烈，要想做得好就要明白顾客喜欢什么。于是上班第一天，老板问你：“你能不能分析下用户数据，给咱们公司的业务做个赋能啊？”

听到这，你会怎么想？

你说：“老板啊，咱们是卖羊肉串的，做数据挖掘没用啊。”估计老板听后，晚上就把你给开了。

那该怎么办呢？如果你感觉一头懵，没关系，我们今天就来讲讲怎么一步步分析用户数据。

## 用户画像的准则

首先就是将自己企业的用户画像做个白描，告诉他这些用户“都是谁”“从哪来”“要去哪”。

你可以这么和老板说：“老板啊，用户画像建模是个系统的工程，我们要解决三个问题。第一呢，就是用户从哪里来，这里我们需要统一标识用户ID，方便我们对用户后续行为进行跟踪。我们要了解这些羊肉串的用户从哪里来，他们是为了聚餐，还是自己吃宵夜，这些场景我们都要做统计分析。第二呢，这些用户是谁？我们需要对这些用户进行标签化，方便我们对用户行为进行理解。第三呢，就是用户要到哪里去？我们要将这些用户画像与我们的业务相关联，提升我们的转化率，或者降低我们的流失率。”

听到这，老板给你竖起了大拇指，说：“不错，都需要什么资源，随时找我就行。”

![](https://static001.geekbang.org/resource/image/0f/f4/0ff019f3f87f627dd5522411f67a45f4.jpg?wh=2371%2A1177)  
刚才说的这三个步骤，下面我一一给你做个梳理。

**首先，为什么要设计唯一标识？**

**用户唯一标识是整个用户画像的核心**。我们以一个App为例，它把“从用户开始使用APP到下单到售后整个所有的用户行为”进行串联，这样就可以更好地去跟踪和分析一个用户的特征。

设计唯一标识可以从这些项中选择：用户名、注册手机号、联系人手机号、邮箱、设备号、CookieID等。

**其次，给用户打标签。**

你可能会想，标签有很多，且不同的产品，标签的选择范围也不同，这么多的标签，怎样划分才能既方便记忆，又能保证用户画像的全面性呢？

这里我总结了八个字，叫“**用户消费行为分析**”。我们可以从这4个维度来进行标签划分。

1. 用户标签：它包括了性别、年龄、地域、收入、学历、职业等。这些包括了用户的基础属性。
2. 消费标签：消费习惯、购买意向、是否对促销敏感。这些统计分析用户的消费习惯。
3. 行为标签：时间段、频次、时长、访问路径。这些是通过分析用户行为，来得到他们使用App的习惯。
4. 内容分析：对用户平时浏览的内容，尤其是停留时间长、浏览次数多的内容进行分析，分析出用户对哪些内容感兴趣，比如，金融、娱乐、教育、体育、时尚、科技等。

可以说，用户画像是现实世界中的**用户的数学建模**，我们正是将海量数据进行**标签化**，来得到精准的用户画像，从而为企业更精准地解决问题。

最后，当你有了用户画像，可以为企业带来什么业务价值呢？

我们可以从用户生命周期的三个阶段来划分业务价值，包括：**获客、粘客和留客**。

1. 获客：如何进行拉新，通过更精准的营销获取客户。
2. 粘客：个性化推荐，搜索排序，场景运营等。
3. 留客：流失率预测，分析关键节点降低流失率。

如果按照数据流处理的阶段来划分用户画像建模的过程，可以分为数据层、算法层和业务层。你会发现在不同的层，都需要打上不同的标签。

**数据层**指的是用户消费行为里的标签。我们可以打上“事实标签”，作为数据客观的记录。

**算法层**指的是透过这些行为算出的用户建模。我们可以打上“模型标签”，作为用户画像的分类标识。

**业务层**指的是获客、粘客、留客的手段。我们可以打上“预测标签”，作为业务关联的结果。

所以这个标签化的流程，就是通过数据层的“事实标签”，在算法层进行计算，打上“模型标签”的分类结果，最后指导业务层，得出“预测标签”。

![](https://static001.geekbang.org/resource/image/f0/2f/f0e94ab9319dc561df3cdd781526c22f.jpg?wh=2780%2A1766)

## 美团外卖的用户画像该如何设计？

刚才讲的是用户画像的三个阶段，以及每个阶段的准则。下面，我们来使用这些准则做个练习。

如果你是美团外卖的数据分析师，你该如何制定用户标识ID，制定用户画像，以及基于用户画像可以做哪些业务关联？

首先，我们先回顾下美团外卖的产品背景。美团已经和大众点评进行了合并，因此在大众点评和美团外卖上都可以进行外卖下单。另外美团外卖针对的是高频O2O的场景，美团外卖是美团的核心产品，基本上有一半的市值都是由外卖撑起来的。

基于用户画像实施的三个阶段，我们首先需要统一用户的唯一标识，那么究竟哪个字段可以作为用户标识呢？

我们先看下美团和大众点评都是通过哪些方式登录的。

我们看到，美团采用的是手机号、微信、微博、美团账号的登录方式。大众点评采用的是手机号、微信、QQ、微博的登录方式。这里面两个APP共同的登录方式都是手机号、微信和微博。

那么究竟哪个可以作为用户的唯一标识呢？当然主要是以用户的注册手机号为标准。这样美团和大众点评的账号体系就可以相通。

当然，大家知道在集团内部，各部门之间的协作，尤其是用户数据打通是非常困难的，所以这里建议，如果希望大数据对各个部门都能赋能，一定要在集团的战略高度上，尽早就在最开始的顶层架构上，将用户标识进行统一，这样在后续过程中才能实现用户数据的打通。

然后我们思考下，有了用户，用户画像都可以统计到哪些标签。我们按照“**用户消费行为分析**”的准则来进行设计。

1. 用户标签：性别、年龄、家乡、居住地、收货地址、婚姻、宝宝信息、通过何种渠道进行的注册。
2. 消费标签：餐饮口味、消费均价、团购等级、预定使用等级、排队使用等级、外卖等级。
3. 行为标签：点外卖时间段、使用频次、平均点餐用时、访问路径。
4. 内容分析：基于用户平时浏览的内容进行统计，包括餐饮口味、优惠敏感度等。

**当你有了“用户消费行为分析”的标签之后，你就可以更好地理解业务了。**

比如一个经常买沙拉的人，一般很少吃夜宵。同样，一个经常吃夜宵的人，吃小龙虾的概率可能远高于其他人。这些结果都是通过数据挖掘中的关联分析得出的。

有了这些数据，我们就可以预测用户的行为。

比如一个用户购买了“月子餐”后，更有可能购买婴儿水，同样婴儿相关的产品比如婴儿湿巾等的购买概率也会增大。

具体在业务层上，我们都可以基于标签产生哪些业务价值呢？

- **在获客上**，我们可以找到优势的宣传渠道，如何通过个性化的宣传手段，吸引有潜在需求的用户，并刺激其转化。
- **在粘客上**，如何提升用户的单价和消费频次，方法可以包括购买后的个性化推荐、针对优质用户进行优质高价商品的推荐、以及重复购买，比如通过红包、优惠等方式激励对优惠敏感的人群，提升购买频次。
- **在留客上**，预测用户是否可能会从平台上流失。在营销领域，关于用户留存有一个观点——如果将顾客流失率降低5%，公司利润将提升25%~85%。可以看出留存率是多么的重要。用户流失可能会包括多种情况，比如用户体验、竞争对手、需求变化等，通过预测用户的流失率可以大幅降低用户留存的运营成本。

## 锻炼自己的抽象能力，将繁杂的事务简单化

上面我们讲到的“用户消费行为标签”都是基于一般情况考虑的，除此之外，用户的行为也会随着营销的节奏产生异常值，比如双十一的时候，如果商家都在促销就会产生突发的大量订单。因此在做用户画像的时候，还要考虑到异常值的处理。

总之，数据量是庞大的，会存在各种各样的使用情况。光是分析EB级别的大数据，我们就要花很长的时间。

但**我们的最终目的不是处理这些数据，而是理解、使用这些数据挖掘的结果**。对数据的标签化能让我们快速理解一个用户，一个商品，乃至一个视频内容的特征，从而方便我们去理解和使用数据。

对数据的标签化其实考验的是我们的抽象能力，在日常工作中，我们也要锻炼自己的抽象能力，它可以让我们很快地将一个繁杂的事物简单化，不仅方便理解，还有益后续的使用。

我们今天讲了用户画像的流程，其中很重要的一个步骤就是给用户打标签，那么你不妨想想，如果给羊肉串连锁店进行用户画像分析，都可以从哪些角度进行标签化？

最后，我们从现实生活中出发，打开你的手机，翻翻看你的微信通讯录，分析下你的朋友圈，都有哪些用户画像？如果你来给它设计标签，都有哪些种类需要统计呢。为了方便后续使用，你是如何将他们归类分组的？

欢迎在评论区与我分享你的答案，我会和你一起探讨。也欢迎点击“请朋友读”，把这篇文章分享给你的朋友或者同事，我们一起交流，一起进步。
<div><strong>精选留言（15）</strong></div><ul>
<li><span>修行者</span> 👍（66） 💬（4）<p>对羊肉串店的用户画像进行用户消费行为分析：
- 用户标签：性别、年龄、区域（如离店的距离，是否在附近上班等）
- 消费标签：消费习惯，是否喜欢加辣或者不加辣，是否对促销敏感，如满50元减10元等，或者是否使用优惠券等
- 行为分析：购买羊肉串的时间点、每个星期购买频次、购买数量等
- 内容分析：基于用户的购买习惯统计，用户餐饮口味，受众人群特点，为开发新口味产品做指导

PS：给极客时间提一个小需求，留言能否支持 markdown，现在的界面有点乱糟糟

课堂笔记：

# 用户画像
互联网下半场**精细化运营**将是长久的主题
**用户**是根本，也是数据分析的出发点

## 用户画像的准则
1. 统一化：统一标识用户ID，如使用手机号、微信号、微博等
2. 标签化：给用户打标签，对用户行为进行理解
3. 业务化：由用户标签，指导用户关联

用户唯一标识：用于用户行为的**串联**

对用户标签化，可以进行**用户消费行为分析**：
- 用户标签：基础信息如性别、年龄、地域等
- 消费标签：消费习惯、购买意向、是否对促销敏感等
- 行为标签：时间段、频次、访问路径等
- 内容分析：页面停留时长、内容浏览，分析用户感兴趣的内容
因此用户画像是现实世界中的**用户的数学建模**

当得到了精准的用户画像，那么就可以为企业更精准的解决问题，业务推荐等

## 用户生命周期

1. 获客：拉新，精准营销获取客户，找到优势的宣传渠道
2. 粘客：场景运营，个性化推荐，提高用户使用频率，比如说可以通过红包、优惠等方式激励优惠敏感人群
3. 留客：流失率的预测，降低流失率，顾客流失率降低 5%，公司利润提升 25% ~ 85%

## 用户画像建模过程

按照数据流处理阶段划分用户画像建模的过程，分为三个层，每一层次，都需要打上不同的标签。

- 数据层：用户消费行为的标签。打上**事实标签**，作为数据客观的记录
- 算法层：透过行为算出的用户建模。打上**模型标签**，作为用户画像的分类
- 业务层：指的是获客、粘客、留客的手段。打上**预测标签**，作为业务关联的结果

## 标签化的作用

数据挖掘的最终目的不是处理 EB 级别的大数据，而是**理解、使用这些数据挖掘的结果**。
对数据的标签化能让我们快速理解一个用户、一个商品，乃至一个视频内容的特征，从而方便我们去理解和使用数据。

而数据标签化实际上是**考验我们的抽象能力**：如何将繁杂的事物简单化？</p>2019-01-04</li><br/><li><span>GodlikeJy</span> 👍（22） 💬（2）<p>羊肉串店的用户画像：
唯一标识：付款人信息，手机号
用户标签：性别、年龄、家乡（区域）、通过何种途径了解本店的信息
消费标签：餐饮口味、消费习惯、消费价格、预定使用等级、排队使用等级
行为标签：光顾时间、光顾频率、光顾的地理位置、平均点餐时间、对优惠券的敏感程度
内容标签：基于用户平时浏览的内容进行统计，包括餐饮口味、优惠敏感度（如：特价菜等）

在获客上：选择微信小程序的平台优势，方法通过嵌入分销、拼团、直播、红包、优惠券等促销功能，让用户主动传播、分享，更加引流获客；
在粘客上：提升用户就餐次数和消费数额，方法通过就餐后的优惠券分发策略，针对优质用户进行更优力度的优惠策略；针对用户就餐人数，结合数据分析得到就餐人数对利润的影响，从而修正餐厅的最低消费金额，或餐厅超过多少金额即可得优惠（但限制人数）
在留客上：预测用户是否可能不再来本店消费，方法可以通过餐后对就餐意见填写的用户发送红包，优惠券等奖励，得到反馈。但此处要注意因为有优惠，用户可能只填写有益意见，存在幸存者偏差的问题，故而要得到真是有效的建议要更花费心思。

【朋友圈画像】
统一用户标志：微信账号包括（家人，同学，朋友，网友，客服）
用户标签：姓名，性别，年龄，家乡，添加渠道，微信签名，微信上地址选择
消费标签：点赞内容，评论内容，聊天内容
行为标签：点赞次数，评论次数，点赞的文章次数，关注公众号个数，微信朋友圈内容公布设置天数，点赞评论时间，聊天频次，聊天时间段，聊天时长，同属几个聊天群，
内容标签：点赞内容，评论内容，聊天内容，发布内容，点赞的文章内容，关注的公众号
</p>2019-12-09</li><br/><li><span>qinggeouye</span> 👍（6） 💬（1）<p>用户画像建模

1、用户唯一标识 ID
手机号&#47;微信&#47;QQ&#47;微博&#47;邮箱&#47;用户名

2、给用户打标签
「用户&#47;消费&#47;行为&#47;分析」
用户标签 - 性别&#47;年龄&#47;地域&#47;收入&#47;学历&#47;职业&#47;注册渠道
消费标签 - 消费习惯&#47;购买意向&#47;消费均价&#47;是否对促销敏感
行为标签 - 时间段&#47;频次&#47;时长&#47;访问路径
内容分析 - 对用户浏览内容&#47;停留时长&#47;浏览次数多的内容进行分析统计,得到用户感兴趣的内容

3、业务价值
用户生命周期
获客 - 营销&#47;宣传&#47;拉新&#47;转化
粘客 - 个性化推荐&#47;搜索排序&#47;场景运营(红包&#47;优惠) 提高用户单价与消费频次
留客 - 流失率预测 降低用户留存运营成本</p>2019-11-03</li><br/><li><span>Geek_34dbb7</span> 👍（5） 💬（1）<p>
羊肉串连锁店的用户画像：
羊肉串连锁店行业背景分析：
1、 首先是一家羊肉串全国连锁店，分析连锁店的销售渠道是否是线上线下相结合
       线上是入驻了哪些平台？
2、连锁加盟店是否是会员制，用户是会员还是非会员？
3、如果用户是会员，了解该羊肉串连锁店注册会员搜集了用户哪些信息，一般都是以手机号进行注册为会员账号
4、确定用户的唯一标识是手机号

羊肉串用户行为分析：
客户标签：
是否为会员、性别、年龄、职业、是否常驻、支付方式

消费标签：
餐饮口味、消费均价

行为标签：
是否打包、团购请客多还是单点消费多、消费频次、消费渠道（线上多还是线下）

内容分析：
线上：基于用户平时浏览的内容和下单选择的口味进行统计，了解该用户平时的餐饮口味和消费的时间段以及消费单价，是否对优惠折扣敏感
线下：1、基于客户的支付方式，比如是现金支付还是信用卡支付还是微信支付宝支付来给客户提供不同的优惠折扣，并且引导非会员首次注册会员，享受低折扣
          2、根据客户的消费时间段来规划餐馆材质的充足准备和安排不同数量的服务人手

获客
基于上面的数据标签，
针对是否会员：我们应该留意非会员，尽量通过活动和优惠折扣转换成会员，并且会员线上线下享受同等折扣。
针对支付方式：对于喜欢现金支付的会员可以了解他是喜欢用现金支付，还是年纪大的不懂得线上支付
，对于不会使用线上支付可以专门引导并且教他们怎么使用线上支付，告诉他们线上支付可以省钱和有很多优惠折扣，还可以不出门线上点餐，尽量简洁真诚的让用户感到消费便利的同时还为自己省了钱，愿意被转化成会员，
针对请客的客户可以重点引导他介绍朋友新客户可以享受双重优惠，引导推荐更多朋友消费

粘客
针对老客户随着消费额累积满减可以给予更多优惠或礼品
给与老客户会员生日节日关怀问候
生日聚餐消费有惊喜

留客
根据不同客户的口味尝试推出更多不同口味肉串，精选肉质、推出附带消费、比如定期推出特色饮品、小吃，套餐组合
了解同类店家的促销活动，推陈出新，优化客户消费体验

朋友圈的画像：
1、根据关系划分熟人和陌生人
     熟人==》
           家人
           亲戚（长辈、同辈）
           朋友（根据亲密程度划分为几颗星
           同事（根据部门和是否是领导划分）
           同学（小学、初中、高中）
           老师（小学、初中、高中）

    陌生人==》
          用户标签： 职业、年龄、性别、好友来源、是否群友
          行为标签： 交流频次、是否点赞
          内容分析：是否微商、宝妈、爱好兴趣</p>2020-05-03</li><br/><li><span>eric</span> 👍（5） 💬（1）<p>朋友圈用户画像
用户标签:用户性别、用户年龄、用户所处位置、用户家乡、用户学历、用户角色、用户来源渠道
消费标签：朋友圈广告点击情况、用户参与活动、
行为标签：朋友圈发布频次、朋友圈可见设置、朋友圈点赞次数、朋友圈评论次数、朋友圈文字浏览次数、朋友圈权限设置
内容分析：浏览文字类型、文字转发类型</p>2019-04-16</li><br/><li><span>方人其</span> 👍（2） 💬（2）<p>消费，行为，内容三类标签，傻傻的分不清，关联太大，怎么区分</p>2019-01-25</li><br/><li><span>王张</span> 👍（1） 💬（2）<p>有没有人记得淘宝的骨灰盒案例。</p>2019-07-31</li><br/><li><span>羊小看</span> 👍（1） 💬（1）<p>羊肉串连锁店：用户标签：会员id，性别、年龄、去过的门店、到店的时段、到店的日期（工作日或周末），消费的菜品、消费的金额、消费的频次、口味、是否会员、团购等级、预约等级、同伴人数
朋友圈：手机号、发朋友圈的频次，发送的内容分类（晒娃、晒美照、晒健身、晒旅游、晒日常、晒穿搭），点击的朋友圈内容偏好（励志、娱乐、科技、财经、新闻），为朋友点赞数，与朋友互动数，广点通点击数，点击的广告类别</p>2019-04-29</li><br/><li><span>曹舰航</span> 👍（1） 💬（1）<p>统一化:用付款账号作为统一唯一标识(银行卡号,微信号,支付宝号)
标签化:
用户标签:性别,年龄区间,电话号,是否有小孩儿,是否单身，到店渠道等（团购？微博？朋友推荐？）
消费标签:消费均价、餐饮口味、团购等级、外卖等级、预定使用等级、排队等级
行为标签:时间段、频次、点餐用时、访问渠道
内容分析：餐饮口味，优惠敏感度等
业务化
获客上：通过有效渠道进行宣传 传单 微信转发获取优惠券等
黏客上：通过关注公众号推送或者手机短信推送优惠折扣信息，个性化推送新出菜品等，或某个时间段折扣力度
留客上：预测流失率</p>2019-04-03</li><br/><li><span>三硝基甲苯</span> 👍（1） 💬（1）<p>羊肉串连锁店：
用户标签：性别、年龄、婚姻、是否有宝宝或者孩子多大了。
消费标签：餐饮口味、消费均价、是否愿意排队。
行为标签：消费时间段、消费频次、平均用餐时长、怎么来的、是否是被推荐的。
内容分析：基于用户平时浏览的内容进行统计，包括餐饮口味、优惠敏感度等。

朋友圈：
用户标签：年龄、婚姻、孩子处于的阶段、工作单位（主要分析是否是推销产品）、（还有会不会容易相信玄学）
行为标签：自拍、心情、风景、其他
内容：原创、转发


大概就是这样</p>2019-02-14</li><br/><li><span>胖陶</span> 👍（1） 💬（1）<p>羊肉串
唯一id确认：手机号或微信号
用户标签：性别、年龄、地域、收入、学历、职业
消费标签：喜欢买什么、喜欢什么口味、是否对促销敏感、一般人均在多少
行为标签：一般都什么时候来，一星期来几次，每次用餐时间多长，一般都怎么来
内容分析：看什么菜比较多
微信朋友圈
唯一id确认：微信号
用户标签：性别、年龄、地域、收入、学历、职业、关系
消费标签：喜欢发什么类型的朋友圈
行为标签：一般都什么时候发朋友圈，一个星期发几次
内容分析：会给谁，或者什么内容点赞或者评论</p>2019-01-16</li><br/><li><span>永降不息之雨</span> 👍（1） 💬（1）<p>用户唯一标识是微信和支付宝的付款ID
用户标签：年龄、职业、住址、性别、用户来源（哪个APP，或者哪个门店）、和谁一起来（朋友、情侣、个人）
消费标签：点了什么餐、什么口味的、点餐等级、排了多长的队、用了多少优惠券、折扣券
行为标签：点餐的时间段、频次、点餐用了多久
内容标签：点餐哪些餐、什么口味的

</p>2019-01-14</li><br/><li><span>大鱼</span> 👍（0） 💬（1）<p>数据标签就是指标吧，算法标签是我们直观认为的那种标签，给主题进行分类。</p>2021-02-21</li><br/><li><span>小晨</span> 👍（0） 💬（1）<p>看了许多对朋友圈的用户画像，试着分析自己关注的公众号画像。

关于[公众号]画像模型分析
统一用户标志：公众号ID
用户标签：地区，名称，添加渠道，公众号简介，关注人数，种类
消费标签：发布的内容，发布的活动，下方功能列表，后台回复内容
行为标签：推送总数，频次，字数，图片视频数量，时间段
内容分析：发布内容，评论内容，点赞次数，在看，关联的其他公众号，是否原创

按照“用户消费行为分析”的准则分析</p>2021-01-27</li><br/><li><span>Geek_f5e6ad</span> 👍（0） 💬（1）<p>1.用户画像建模：用户从哪里来（统一用户的唯一标识）、用户是谁（标签化）、用户要到哪里去（用户画像和业务结合，指导业务）
即 统一化：统一用户的唯一标识 标签化：打标签形成用户画像 业务化：用户画像指导业务
1.1用户唯一标识 可以用于追踪和分析用户的行为
1.2用户标签划分：用户消费行为分析：①用户标签 基本信息年龄性别收入地域职业注册方式等 ②消费标签 消费习惯、消费项目、消费均价等 ③行为标签 消费时间、消费频次、访问途径等 ④内容标签 浏览内容等
2.从数据流处理阶段划分用户画像建模过程：通过数据层的“事实标签”，在算法层进行计算，打上“模型标签”的分类结果，最后指导业务层，得出“预测标签”。
2.1数据层：打标签（记录客观数据：事实标签）
2.2算法层：根据标签建模（通过数据得到的用户模型，模型标签）
2.3业务层：获客、粘客、留客的手段。预测标签。
2.3.1业务层的业务价值实现：①获客：最佳宣传手段 ②粘客：如何提升用户的单价和消费频次 ③留客：预测用户是否会从平台上流失
3.注意点：“用户消费行为标签”基于一般情况考虑。
用户的行为会随着营销的节奏产生异常值，比如双十一的时候，如果商家都在促销就会产生突发的大量订单。因此在做用户画像的时候，还要考虑到异常值的处理。</p>2020-11-05</li><br/>
</ul>